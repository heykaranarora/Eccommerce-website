<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Data Management System</title>
</head>
<body>

  <div id="loginSection">
    <h2>Login</h2>
    <input type="text" id="loginUsername" placeholder="Username">
    <input type="password" id="loginPassword" placeholder="Password">
    <select id="loginType">
      <option value="user">Normal User</option>
      <option value="admin">Admin</option>
    </select>
    <button id="loginButton">Login</button>
    <button id="showSignupButton">Signup</button>
  </div>

  <div id="signupSection" style="display: none;">
    <h2>Signup</h2>
    <input type="text" id="signupUsername" placeholder="Username">
    <input type="password" id="signupPassword" placeholder="Password">
    <button id="signupButton">Signup</button>
    <button id="showLoginButton">Back to Login</button>
  </div>

  <div id="dataManagementSection" style="display: none;">
    <h2>Data Management</h2>
    <input type="text" id="dataInput" placeholder="Enter data">
    <button id="saveButton">Save Data</button>

    <div id="output"></div>
  </div>

  <script>
    var isLoggedIn = false;
    var isAdmin = false;

    // Function to authenticate user
    function authenticate(username, password, userType) {
      if (userType === 'admin' && username === 'admin' && password === 'admin123') {
        isAdmin = true;
        isLoggedIn = true;
      } else if (userType === 'user') {
        var storedUsers = JSON.parse(localStorage.getItem('users')) || [];
        var user = storedUsers.find(function(u) {
          return u.username === username && u.password === password;
        });

        if (user) {
          isLoggedIn = true;
        } else {
          alert('Invalid username or password. Please try again.');
        }
      }

      if (isLoggedIn) {
        document.getElementById('loginSection').style.display = 'none';
        document.getElementById('signupSection').style.display = 'none';
        document.getElementById('dataManagementSection').style.display = 'block';
        displayData();
      }
    }

    // Function to save user data to local storage
    function saveUser(username, password) {
      var storedUsers = JSON.parse(localStorage.getItem('users')) || [];
      storedUsers.push({ username: username, password: password });
      localStorage.setItem('users', JSON.stringify(storedUsers));
      // Clear the input fields after signup
      document.getElementById('signupUsername').value = '';
      document.getElementById('signupPassword').value = '';
    }

    // Function to save data to local storage
    function saveData() {
      if (!isLoggedIn) {
        alert('You need to be logged in to save data.');
        return;
      }

      var inputData = document.getElementById('dataInput').value;
      if (inputData.trim() !== '') {
        localStorage.setItem('savedData', inputData);
        document.getElementById('dataInput').value = '';
        displayData();
      } else {
        alert('Please enter some data to save.');
      }
    }

    // Function to display saved data from local storage
    function displayData() {
      if (!isLoggedIn) {
        return;
      }

      var savedData = localStorage.getItem('savedData');
      if (savedData) {
        document.getElementById('output').innerHTML = 'Saved Data: ' + savedData;
      } else {
        document.getElementById('output').innerHTML = 'No data saved.';
      }
    }

    // Event listener for the login button
    document.getElementById('loginButton').addEventListener('click', function() {
      var username = document.getElementById('loginUsername').value;
      var password = document.getElementById('loginPassword').value;
      var userType = document.getElementById('loginType').value;
      authenticate(username, password, userType);
    });

    // Event listener for the signup button
    document.getElementById('signupButton').addEventListener('click', function() {
      var username = document.getElementById('signupUsername').value;
      var password = document.getElementById('signupPassword').value;
      saveUser(username, password);
      authenticate(username, password, 'user');
    });

    // Event listener for showing signup section
    document.getElementById('showSignupButton').addEventListener('click', function() {
      document.getElementById('loginSection').style.display = 'none';
      document.getElementById('signupSection').style.display = 'block';
    });

    // Event listener for showing login section
    document.getElementById('showLoginButton').addEventListener('click', function() {
      document.getElementById('signupSection').style.display = 'none';
      document.getElementById('loginSection').style.display = 'block';
    });

    // Event listener for the save button
    document.getElementById('saveButton').addEventListener('click', saveData);

    // Check if the user is logged in when the page loads
    window.addEventListener('load', function() {
      if (isLoggedIn) {
        document.getElementById('loginSection').style.display = 'none';
        document.getElementById('signupSection').style.display = 'none';
        document.getElementById('dataManagementSection').style.display = 'block';
      }
    });
  </script>

</body>
</html>
